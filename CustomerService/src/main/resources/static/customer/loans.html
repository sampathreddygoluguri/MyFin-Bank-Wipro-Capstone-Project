<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>MyFin - Loan Center</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Main Styles -->
<link rel="stylesheet" href="/assets/css/style.css">

<style>
/* Sidebar */
.sidebar {
    width: 240px;
    background: #fff;
    border-right: 1px solid #e5e5e5;
    min-height: 100vh;
    padding-top: 20px;
}
.sidebar a {
    display: block;
    padding: 12px 20px;
    color: #444;
    font-weight: 500;
    text-decoration: none;
}
.sidebar a.active {
    color: #1976d2;
    background: rgba(25,118,210,0.18);
    border-left: 4px solid #1976d2;
}
.sidebar a:hover {
    background: rgba(25,118,210,0.10);
    color: #1976d2;
}

/* Footer */
footer {
    position: fixed;
    bottom: 0;
    left: 240px;
    right: 0;
    background: #fff;
    border-top: 1px solid #ddd;
    padding: 8px;
    text-align: center;
    font-size: 0.85rem;
    color: #777;
}

/* Clock */
.clock {
    font-weight: 600;
    color: #555;
}

/* Success / Error Banner */
.alert-box {
    width: 100%;
    padding: 12px;
    border-radius: 6px;
    font-weight: 600;
    margin-bottom: 15px;
    display: none;
    text-align: center;
}
.alert-success {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}
.alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* Modal Overlay */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.45);
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

/* Modal Box */
.modal-box {
    width: 380px;
    background: #fff;
    padding: 22px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.modal-box h3 {
    color: #1976d2;
    margin-bottom: 12px;
}

/* Status Colors */
.status-pending { color: orange; font-weight: bold; }
.status-approved { color: green; font-weight: bold; }
.status-denied { color: red; font-weight: bold; }
.status-closed { color: gray; font-weight: bold; }
</style>
</head>

<body>

<!-- HEADER -->
<div class="bg-white shadow-sm p-3 d-flex justify-content-between align-items-center">
    <div class="h5 fw-bold text-dark">MyFin Bank</div>

    <div class="d-flex align-items-center gap-2">
        <span style="font-size: 12px; color: red; font-weight: bold;">● LIVE</span>
        <div id="dashboardClock" class="clock"></div>
    </div>
</div>

<div class="d-flex">

<!-- SIDEBAR -->
<aside class="sidebar">
    <a href="/customer/dashboard.html">Dashboard</a>
    <a href="/customer/dashboard.html#investments">Investments</a>
    <a href="/customer/loans.html" class="active">Loan Center</a>
    <a href="/customer/dashboard.html#transactions">Transactions</a>
</aside>

<!-- MAIN CONTENT -->
<main class="flex-grow-1 p-4">

    <!-- Success / Error Messages -->
    <div id="alertBox" class="alert-box"></div>

    <h2 class="text-primary">Loan Center</h2>
    <p>Manage your loan applications & payments.</p>

    <button class="btn btn-primary mb-3" onclick="openApplyLoanModal()">Apply for Loan</button>

    <div id="noLoansBox" class="card p-3 mb-4" style="display:none;">
        <p>No loans yet.</p>
    </div>

    <div id="loanSection" class="card p-3 mb-4" style="display:none;">
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th>ID</th>
                    <th>Amount</th>
                    <th>Rate</th>
                    <th>Months</th>
                    <th>EMI</th>
                    <th>Total Paid</th>
                    <th>Remaining Amount</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="loanTable"></tbody>
        </table>
    </div>

    <!-- Return to Dashboard -->
    <div class="text-center mt-4">
        <a href="/customer/dashboard.html" class="btn btn-secondary px-4">Return to Dashboard</a>
    </div>

</main>
</div>

<footer>© <span id="year"></span> MyFin Bank • All rights reserved. • Developed For Capstone</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();
setInterval(() => {
    document.getElementById("dashboardClock").textContent = new Date().toLocaleTimeString("en-GB");
}, 1000);
</script>

<!-- APPLY LOAN MODAL -->
<div id="applyLoanModal" class="modal-overlay">
    <div class="modal-box">
        <h3>Apply for Loan</h3>

        <label>Loan Amount:</label>
        <input type="number" class="form-control mb-2" id="loanAmount">

        <label>Annual Rate (%):</label>
        <input type="number" class="form-control mb-2" id="loanRate" value="10">

        <label>Months:</label>
        <select id="loanMonths" class="form-select mb-3">
            <option value="6">6 Months</option>
            <option value="12">1 Year</option>
        </select>

        <button class="btn btn-primary w-100 mb-2" onclick="submitLoanApplication()">Apply</button>
        <button class="btn btn-secondary w-100" onclick="closeApplyLoanModal()">Cancel</button>
    </div>
</div>

<!-- PAY LOAN MODAL -->
<div id="payLoanModal" class="modal-overlay">
    <div class="modal-box">
        <h3>Pay Loan</h3>

        <p>Loan ID: <b id="payLoanId"></b></p>
        <p>Remaining: <b id="payRemaining"></b></p>
        <p>EMI: <b id="payEmi"></b></p>

        <label>Enter Amount:</label>
        <input type="number" class="form-control mb-3" id="payLoanAmount">

        <button class="btn btn-primary w-100 mb-2" onclick="submitLoanPayment()">Pay</button>
        <button class="btn btn-secondary w-100" onclick="closePayLoanModal()">Cancel</button>
    </div>
</div>

<script type="module" src="/assets/js/customer-loans.js"></script>

</body>
</html>
